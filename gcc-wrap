# Remove some unnecessary shit from the link files.
# There's probably a cmake config file somewhere that controls this crap
# but ain't nobody got time that  
find /android/build/android-cm-armv6/vendor/rpi/rpi/userland -iname link.txt -exec sed  -i  's#-lpthread##g' {} \;
find /android/build/android-cm-armv6/vendor/rpi/rpi/userland  -iname link.txt -exec sed  -i  's#-lrt##g' {} \;
find /android/build/android-cm-armv6/vendor/rpi/rpi/userland  -iname link.txt -exec sed  -i  's#-Wl,-rpath,/android/build/android-cm-armv6/vendor/rpi/rpi/userland/build/lib:##g' {} \;

# Tell gcc where to find the android libraries an use a specs file to 
# make sure it uses the correct crtbegin/end etc
/android/build/android-cm-armv6/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.7/bin/arm-linux-androideabi-gcc \
-D__USE_FILE_OFFSET64 -L/REPO/android-out/android-cm-armv6/target/product/rpi/obj/lib/ \
-specs=/android/build/android-cm-armv6/vendor/rpi/rpi/userland/specs1 $*
